# Summarize News Workflow

Automatically fetch and summarize news articles using AI.

## Description

This workflow demonstrates AutoTaskOps capabilities by:
1. Fetching news from multiple sources
2. Using AI to generate concise summaries
3. Outputting results to files or email

## Tasks

1. **Fetch News** (`fetch_news.py`)
   - Retrieves latest news articles
   - Supports mock mode for deterministic demos
   - Saves raw data to `output/news_raw.json`

2. **Summarize** (`summarize.py`)
   - Uses AI to generate bullet-point summary
   - Falls back to mock mode if no API key
   - Outputs to `output/summary.txt`

3. **Send Output** (`send_email.sh`)
   - Delivers summary via email (when configured)
   - Mock mode: saves to file
   - Real mode: uses SMTP

## Schedule

Runs daily at 7:00 AM (cron: `0 7 * * *`)

## Environment Variables

### Mock Mode (Default)
```bash
export DEMO_MOCK=true  # Use deterministic mock data
```

### Real Mode
```bash
# For news fetching
export NEWS_API_KEY="your-newsapi-key"

# For AI summarization  
export GOOGLE_AI_API_KEY="your-gemini-key"
# OR
export OPENAI_API_KEY="your-openai-key"

# For email sending
export SMTP_HOST="smtp.gmail.com"
export SMTP_PORT="587"
export SMTP_USER="your-email@gmail.com"
export SMTP_PASSWORD="your-password"
export EMAIL_TO="recipient@example.com"
```

## Running This Workflow

### Option 1: Using the Backend API
```bash
curl -X POST http://localhost:3001/api/run \
  -H "Content-Type: application/json" \
  -d '{"workflowId": "summarize-news"}'
```

### Option 2: Using the CLI Runner
```bash
cd backend
node runner.js --workflow ../workflows/summarize-news/summarize-news.yaml
```

### Option 3: Using Kestra
```bash
# Start Kestra
cd kestra
docker-compose up -d

# Access UI at http://localhost:8080
# Import and execute workflow
```

### Option 4: Manual Execution
```bash
cd workflows/summarize-news

# Run each script sequentially
python3 scripts/fetch_news.py
python3 scripts/summarize.py  
bash scripts/send_email.sh
```

## Output Files

- `output/news_raw.json` - Raw fetched articles
- `output/summary.txt` - AI-generated summary
- `output/latest_summary.txt` - Copy of latest summary
- `output/metadata.json` - Execution metadata
- `runs/<timestamp>/log.txt` - Execution logs

## Example Output

```
ðŸ“° Daily News Summary
Generated: December 12, 2025

ðŸ”¹ AI & Technology
Major breakthrough in natural language processing...

ðŸ”¹ Climate & Environment
Historic climate agreement reached...

ðŸ”¹ Space Exploration
Successful satellite launch expands capabilities...
```

## Customization

Edit the workflow to:
- Change news sources
- Adjust summary format
- Add filtering by topic
- Change schedule frequency
- Add notifications (Slack, Discord, etc.)

---

*Generated by AutoTaskOps*
